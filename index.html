<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆéƒ½å‡ºå‘è±«è§éƒ‘å¼€æ´›ä¸‰æ—¥æ¸¸ (4æœˆ29æ—¥-5æœˆ2æ—¥) - æ¸©é¦¨ç‰ˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        /* Custom styles for specific elements if needed */
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #fdf6e3; /* Warm background */
        }
        .map-container {
            width: 100%;
            height: 450px; /* Keep map height */
            border-radius: 0.5rem; /* Rounded corners */
            border: 1px solid #e5e7eb; /* Light border */
        }
        /* Keep existing journal styles */
        .travel-journal {
            margin: 30px 0;
            padding: 20px;
            background: linear-gradient(135deg, #f9f5f0 0%, #f0e6d6 100%);
            border-radius: 12px;
            border: 1px solid #e4d9c3;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
        }
        .journal-header { display: flex; justify-content: space-between; align-items: baseline; margin-bottom: 15px; border-bottom: 2px dashed #d4c9b8; padding-bottom: 10px; }
        .journal-header h3 { margin: 0; color: #7a5c50; font-size: 1.3em; }
        .journal-date { color: #a08679; font-family: 'Courier New', monospace; font-size: 0.9em; }
        .journal-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .journal-image { width: 100%; border-radius: 8px; border: 1px solid #ddd; box-shadow: 0 4px 15px rgba(0,0,0,0.1); transition: transform 0.3s ease, box-shadow 0.3s ease; cursor: pointer; }
        .journal-image:hover { transform: translateY(-3px); box-shadow: 0 6px 20px rgba(0,0,0,0.15); }
        .journal-desc { padding: 10px; font-size: 0.95em; line-height: 1.6; color: #5a4a42; }
        .journal-desc p { margin: 12px 0; padding-left: 10px; border-left: 3px solid #d4a373; }
        .journal-section { margin-bottom: 18px; padding-bottom: 15px; border-bottom: 1px dashed #e0d6c2; }
        .journal-section h4 { color: #8c6a56; margin: 0 0 8px 0; font-size: 1.05em; display: flex; align-items: center; }
        .journal-section ul { margin: 0; padding-left: 20px; list-style: none; } /* Remove default list style */
        .journal-section li { margin-bottom: 6px; line-height: 1.5; position: relative; padding-left: 1.2em; }
        .journal-section li::before { /* Custom bullet points */
            content: 'â€¢';
            position: absolute;
            left: 0;
            color: #d4a373; /* Warm color for bullets */
            font-weight: bold;
        }
        .spicy-level { display: inline-block; margin: 0 5px; font-size: 0.9em; }
        .tips { background-color: rgba(255,255,255,0.3); padding: 12px; border-radius: 6px; border-left: 3px solid #d4a373; }
        .tips p { margin: 8px 0; font-style: italic; }
        @media (max-width: 768px) {
            .journal-grid { grid-template-columns: 1fr; }
            .journal-desc { padding: 15px 5px; }
            .journal-section { margin-bottom: 15px; }
        }
        /* Lightbox styles */
        #lightbox { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.8); z-index: 1000; justify-content: center; align-items: center; }
        .lightbox-content { position: relative; max-width: 90%; max-height: 90%; }
        #lightbox-img { max-height: 80vh; max-width: 90vw; border: 3px solid white; box-shadow: 0 0 20px rgba(0,0,0,0.6); object-fit: contain; }
        #lightbox-caption { color: white; margin-top: 15px; font-family: 'Segoe UI', sans-serif; text-align: center; }
        .close { position: absolute; top: -40px; right: 0; color: white; font-size: 35px; font-weight: bold; cursor: pointer; transition: color 0.3s; }
        .close:hover { color: #ccc; }
        /* Custom card styles */
        .day-card {
            background-color: #fffaf0; /* Creamy background for cards */
            border: 1px solid #f3e9d2; /* Soft border */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        .day-card h2 {
            color: #8c6a56; /* Warm brown for titles */
            border-bottom: 2px solid #e0d6c2;
        }
        .info-section h3 {
            color: #a08679; /* Lighter brown for subtitles */
            border-bottom: none;
            font-size: 1.1em;
            margin-bottom: 0.5rem;
        }
        .info-item {
            display: flex;
            align-items: center; /* Vertically center icon and text */
            margin-bottom: 0.5rem;
            color: #5a4a42; /* Darker text for readability */
        }
        .info-item i {
            color: #d4a373; /* Warm icon color */
            margin-right: 0.75rem; /* Space between icon and text */
            width: 1.5em; /* Fixed width for alignment */
            text-align: center;
        }
        .info-item ul {
            padding-left: 0;
            margin: 0;
            list-style: none;
        }
        .info-item li {
            margin-bottom: 0.25rem;
        }
        .info-item strong {
            color: #8c6a56; /* Consistent warm color for emphasis */
        }
        /* Important Notes styling */
        .important-note-section {
            background-color: #fff8e1; /* Light yellow */
            border-left: 5px solid #ffca28; /* Amber border */
            padding: 1rem 1.5rem;
            margin-top: 2rem;
            border-radius: 0.5rem;
        }
        .important-note-section h2 {
            color: #c79100; /* Darker yellow */
            margin-top: 0;
            border-bottom: 1px solid #ffe082;
        }
        .important-note-section table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }
        .important-note-section th, .important-note-section td {
            border: 1px solid #ffe082;
            padding: 0.5rem 0.75rem;
            text-align: left;
        }
        .important-note-section th {
            background-color: #fff1cc;
        }
    </style>
    <script type="text/javascript">
        window._AMapSecurityConfig = {
            securityJsCode: '2f7d35abcd04429b1897b5b8f208383e', // Replace YYYYYYY with your actual Security Key
        }
    </script>
    <script type="text/javascript" src="https://webapi.amap.com/maps?v=2.0&key=a21514b91592e0af9f6a1ce3cfee1650&plugin=AMap.Geocoder"></script> </head>
<body class="text-gray-800">
    <div class="container mx-auto max-w-4xl p-4 md:p-8">
        <h1 class="text-3xl md:text-4xl font-bold text-center text-amber-800 mb-6 md:mb-10">æˆéƒ½å‡ºå‘è±«è§éƒ‘å¼€æ´›ä¸‰æ—¥æ¸¸ (4æœˆ29æ—¥-5æœˆ2æ—¥)</h1>

        <div class="mb-8 p-4 bg-white rounded-lg shadow">
            <h2 class="text-2xl font-semibold text-amber-700 mb-4 border-b pb-2">è¡Œç¨‹æ¦‚è§ˆåœ°å›¾</h2>
            <div class="mb-3 space-x-2">
                <button id="showAllBtn" class="px-3 py-1 bg-amber-500 text-white rounded hover:bg-amber-600 transition duration-150 text-sm">æ˜¾ç¤ºå…¨éƒ¨</button>
                <button id="showDay1Btn" class="px-3 py-1 bg-orange-500 text-white rounded hover:bg-orange-600 transition duration-150 text-sm">ç¬¬ 1 å¤©</button>
                <button id="showDay2Btn" class="px-3 py-1 bg-lime-600 text-white rounded hover:bg-lime-700 transition duration-150 text-sm">ç¬¬ 2 å¤©</button>
                <button id="showDay3Btn" class="px-3 py-1 bg-sky-600 text-white rounded hover:bg-sky-700 transition duration-150 text-sm">ç¬¬ 3 å¤©</button>
            </div>
            <div id="mapContainer" class="map-container"></div>
            <div id="mapLog" class="text-xs text-gray-500 mt-1">åœ°å›¾åŠ è½½æ—¥å¿—:</div>
        </div>

        <div class="space-y-8">

            <div class="day-card p-5 rounded-lg">
                <h2 class="text-xl font-bold mb-4 pb-2">ç¬¬0æ™šï¼š4æœˆ29æ—¥ (æ˜ŸæœŸäºŒ) - å‡ºå‘å‰å¾€éƒ‘å·</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="info-section">
                        <h3 class="font-semibold flex items-center"><i class="fa-regular fa-clock w-5 mr-2 text-amber-600"></i>è¡Œç¨‹å®‰æ’</h3>
                        <ul class="list-disc list-inside ml-1 space-y-1 text-sm">
                            <li>18:00åï¼šä»æˆéƒ½å‡ºå‘</li>
                            <li>æŠµè¾¾åå‰å¾€å…¨å­£é…’åº—ï¼ˆéƒ‘å·èŠ±å›­è·¯å†œä¸šè·¯ï¼‰</li>
                        </ul>
                    </div>
                    <div class="info-section">
                        <h3 class="font-semibold flex items-center"><i class="fa-solid fa-cloud-sun w-5 mr-2 text-amber-600"></i>å¤©æ°”ä¸ç©¿è¡£ (æŠµè¾¾éƒ‘å·æ—¶)</h3>
                        <ul class="list-disc list-inside ml-1 space-y-1 text-sm">
                            <li><strong>å¤©æ°”:</strong> å¤œé—´çº¦15-18Â°C <em class="text-xs">(è¡Œå‰æŸ¥è¯¢)</em></li>
                            <li><strong>ç©¿è¡£:</strong> èˆ’é€‚é•¿è£¤ã€Tæ¤+å¤–å¥—</li>
                        </ul>
                    </div>
                    <div class="info-section md:col-span-2">
                        <h3 class="font-semibold flex items-center"><i class="fa-solid fa-route w-5 mr-2 text-amber-600"></i>äº¤é€šæ–¹å¼</h3>
                         <ul class="ml-1 space-y-1 text-sm">
                            <li><i class="fa-solid fa-plane w-4 mr-1 text-gray-500"></i> æˆéƒ½å¤©åºœ (TFU) -> éƒ‘å·æ–°éƒ‘ (CGO): å›½èˆªCA2773 (19:00-20:50)</li>
                            <li><i class="fa-solid fa-taxi w-4 mr-1 text-gray-500"></i> æœºåœº -> é…’åº—: æ‰“è½¦ (çº¦40-50åˆ†é’Ÿ) / <i class="fa-solid fa-subway w-4 mr-1 text-gray-500"></i> åœ°é“ (90åˆ†é’Ÿ)</li>
                        </ul>
                    </div>
                    <div class="info-section">
                        <h3 class="font-semibold flex items-center"><i class="fa-solid fa-utensils w-5 mr-2 text-amber-600"></i>é¤é¥®å®‰æ’</h3>
                         <ul class="list-disc list-inside ml-1 space-y-1 text-sm">
                            <li>æ™šé¤: æˆéƒ½è§£å†³æˆ–äº¤é€šå·¥å…·ä¸Š (éœ€è‡ªå¤‡)</li>
                        </ul>
                    </div>
                     <div class="info-section">
                        <h3 class="font-semibold flex items-center"><i class="fa-solid fa-bed w-5 mr-2 text-amber-600"></i>ä½å®¿</h3>
                         <ul class="list-disc list-inside ml-1 space-y-1 text-sm">
                            <li>å…¨å­£é…’åº—ï¼ˆéƒ‘å·èŠ±å›­è·¯å†œä¸šè·¯ï¼‰</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="day-card p-5 rounded-lg">
                <h2 class="text-xl font-bold mb-4 pb-2">ç¬¬1å¤©ï¼š4æœˆ30æ—¥ (æ˜ŸæœŸä¸‰) - éƒ‘å· & å‰å¾€å¼€å°</h2>

                 <div class="travel-journal my-4">
                    <div class="journal-header">
                        <h3>ğŸ“” éƒ‘å·æ‰‹å¸</h3>
                        <span class="journal-date">4/30</span>
                    </div>
                    <div class="journal-grid">
                        <img src="./day1_journal.png" alt="éƒ‘å·æ‰‹å¸ï¼šæ²³å—åšç‰©é™¢å‚è§‚ç¬”è®°ã€äºŒä¸ƒå¹¿åœºé€Ÿå†™"
                            class="journal-image" loading="lazy" onerror="this.src='https://placehold.co/400x300/f0e6d6/7a5c50?text=å›¾ç‰‡åŠ è½½å¤±è´¥'">
                        <div class="journal-desc">
                            <div class="journal-section"><h4>ğŸ› æ–‡åŒ–å°è®°</h4><ul><li><strong>æ²³å—åšç‰©é™¢å¿…çœ‹ï¼š</strong>è´¾æ¹–éª¨ç¬›(1æ¥¼)ã€å¦‡å¥½é¸®å°Š(2æ¥¼)ã€äº‘çº¹é“œç¦(4æ¥¼)</li><li><strong>å†·çŸ¥è¯†ï¼š</strong>æ¯å‘¨ä¸€é—­é¦†ï¼Œ16:00åœæ­¢å…¥é¦†</li><li><strong>ç›–ç« ç‚¹ï¼š</strong>1æ¥¼æ–‡åˆ›åº—æœ‰6ä¸ªå…è´¹ç« </li></ul></div>
                            <div class="journal-section"><h4>ğŸ“¸ æ‘„å½±æŒ‡å—</h4><ul><li><strong>å¤§ç‰ç±³æ¥¼ï¼š</strong>19:30äº®ç¯åæ‹æ‘„æ•ˆæœæœ€ä½³ï¼Œå»ºè®®ä½¿ç”¨å¹¿è§’é•œå¤´</li><li><strong>äºŒä¸ƒå¡”ï¼š</strong>ä¸œå—è§’èŠ±å›å‰æ˜¯ç»å…¸æœºä½</li><li><strong>å‚æ•°å»ºè®®ï¼š</strong>å¤œæ™¯æ¨¡å¼ ISO800-1600 f/2.8 1/30s</li></ul></div>
                            <div class="journal-section"><h4>ğŸ½ ç¾é£Ÿæ—¥å¿—</h4><ul><li><strong>æ–¹ä¸­å±±èƒ¡è¾£æ±¤ï¼š</strong><span class="spicy-level">ğŸŒ¶ï¸ğŸŒ¶ï¸ğŸŒ¶ï¸ (ä¸­è¾£)</span> é…æ²¹é¦å¤´æ¯”æ²¹æ¡æ›´åœ°é“</li><li><strong>åˆé¤æ¨èï¼š</strong>åˆè®°çƒ©é¢(äººæ°‘è·¯åº—) ä¸‰é²œå£å‘³æœ€å—æ¬¢è¿</li><li><strong>é¿é›·æç¤ºï¼š</strong>æ™¯åŒºå†…"å¼€å°å°åƒ"ä¸æ­£å®—</li></ul></div>
                            <div class="journal-section tips"><h4>ğŸ’¡ å®ç”¨è´´å£«</h4><p>ã€Œåœ°é“2å·çº¿å…³è™å±¯ç«™Cå£å‡ºï¼Œå‘è¥¿æ­¥è¡Œ300ç±³å³åˆ°åšç‰©é™¢ï¼Œæ¯”æ‰“è½¦æ›´å¿«ã€</p><p>ã€Œå¤§ç‰ç±³58æ¥¼è§‚å…‰å…éœ€è´­ç¥¨(Â¥68)ï¼Œä¸å¦‚åœ¨å¦‚æ„æ¹–ç•”å…è´¹è§‚èµã€</p></div>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="info-section md:col-span-2">
                        <h3 class="font-semibold flex items-center"><i class="fa-regular fa-clock w-5 mr-2 text-amber-600"></i>è¡Œç¨‹å®‰æ’</h3>
                        <ul class="list-disc list-inside ml-1 space-y-1 text-sm">
                            <li><strong>ä¸Šåˆ:</strong> é…’åº—æ—©é¤ -> æ­¥è¡Œè‡³æ²³å—åšç‰©é™¢ (09:00-12:00) <strong class="text-red-500">(éœ€æå‰5å¤©é¢„çº¦)</strong></li>
                            <li><strong>ä¸­åˆ:</strong> å–è¡Œæ -> åœ°é“è‡³äºŒä¸ƒå¹¿åœº -> åˆé¤ (13:15-14:30) -> é€›äºŒä¸ƒå¹¿åœº (14:30-15:00)</li>
                            <li><strong>ä¸‹åˆ:</strong> åœ°é“è‡³åƒçºå¹¿åœº (å¤§ç‰ç±³) -> åœ°é“è‡³éƒ‘å·ä¸œç«™ (15:50-16:20)</li>
                            <li><strong>å‚æ™š:</strong> é«˜é“ éƒ‘å·ä¸œ -> å®‹åŸè·¯ (16:47-17:14) -> æ‰“è½¦è‡³æ±‰åº­é…’åº— (æ¸…æ˜ä¸Šæ²³å›­åº—)</li>
                            <li><strong>æ™šä¸Š:</strong> æ¸…æ˜ä¸Šæ²³å›­ (æ™šé¤å›­å†…è§£å†³) <strong class="text-red-500">(æå‰è´­ç¥¨&çœ‹èŠ‚ç›®è¡¨)</strong></li>
                            <li><i class="fa-solid fa-suitcase w-4 mr-1 text-gray-500"></i> è¡Œæå¯„å­˜: å…¨å­£é…’åº—</li>
                        </ul>
                    </div>
                     <div class="info-section">
                        <h3 class="font-semibold flex items-center"><i class="fa-solid fa-cloud-sun w-5 mr-2 text-amber-600"></i>å¤©æ°”ä¸ç©¿è¡£</h3>
                        <ul class="list-disc list-inside ml-1 space-y-1 text-sm">
                            <li><strong>å¤©æ°”:</strong> æ™´é—´å¤šäº‘, 16Â°C-28Â°C <em class="text-xs">(è¡Œå‰æŸ¥è¯¢)</em></li>
                            <li><strong>ç©¿è¡£:</strong> Tæ¤/è–„é•¿è¢–, è½»è–„å¤–å¥—/é˜²æ™’è¡£, èˆ’é€‚é‹, å¸½/å¤ªé˜³é•œ</li>
                        </ul>
                    </div>
                    <div class="info-section">
                        <h3 class="font-semibold flex items-center"><i class="fa-solid fa-route w-5 mr-2 text-amber-600"></i>æ™¯ç‚¹é—´äº¤é€š</h3>
                         <ul class="ml-1 space-y-1 text-sm">
                            <li><i class="fa-solid fa-person-walking w-4 mr-1 text-gray-500"></i> é…’åº— <-> æ²³å—åšç‰©é™¢ (15åˆ†é’Ÿ)</li>
                            <li><i class="fa-solid fa-subway w-4 mr-1 text-gray-500"></i> é…’åº— -> äºŒä¸ƒå¹¿åœº (30åˆ†é’Ÿ)</li>
                            <li><i class="fa-solid fa-subway w-4 mr-1 text-gray-500"></i> äºŒä¸ƒå¹¿åœº -> å¤§ç‰ç±³ (25åˆ†é’Ÿ)</li>
                            <li><i class="fa-solid fa-subway w-4 mr-1 text-gray-500"></i> å¤§ç‰ç±³ -> éƒ‘å·ä¸œç«™ (30åˆ†é’Ÿ)</li>
                            <li><i class="fa-solid fa-taxi w-4 mr-1 text-gray-500"></i> å®‹åŸè·¯ç«™ -> é…’åº— (30åˆ†é’Ÿ)</li>
                            <li><i class="fa-solid fa-person-walking w-4 mr-1 text-gray-500"></i> é…’åº— <-> æ¸…æ˜ä¸Šæ²³å›­ (15åˆ†é’Ÿ)</li>
                        </ul>
                    </div>
                    <div class="info-section">
                        <h3 class="font-semibold flex items-center"><i class="fa-solid fa-utensils w-5 mr-2 text-amber-600"></i>é¤é¥®å®‰æ’</h3>
                         <ul class="list-disc list-inside ml-1 space-y-1 text-sm">
                            <li>æ—©é¤: é…’åº—</li>
                            <li>åˆé¤: äºŒä¸ƒå¹¿åœºå‘¨è¾¹</li>
                            <li>æ™šé¤: æ¸…æ˜ä¸Šæ²³å›­å†…</li>
                        </ul>
                    </div>
                     <div class="info-section">
                        <h3 class="font-semibold flex items-center"><i class="fa-solid fa-bed w-5 mr-2 text-amber-600"></i>ä½å®¿</h3>
                         <ul class="list-disc list-inside ml-1 space-y-1 text-sm">
                            <li>æ±‰åº­é…’åº—ï¼ˆæ¸…æ˜ä¸Šæ²³å›­åº—ï¼‰</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="day-card p-5 rounded-lg">
                 <h2 class="text-xl font-bold mb-4 pb-2">ç¬¬2å¤©ï¼š5æœˆ1æ—¥ (æ˜ŸæœŸå››) - å¼€å° & å‰å¾€æ´›é˜³</h2>

                 <div class="travel-journal my-4">
                     <div class="journal-header">
                         <h3>ğŸ“” å¼€å°æ‰‹å¸</h3>
                         <span class="journal-date">5/1</span>
                     </div>
                     <div class="journal-grid">
                         <img src="./day2_journal.png" alt="å¼€å°æ‰‹å¸ï¼šæ¸…æ˜ä¸Šæ²³å›­æ¸¸ç©æ”»ç•¥ã€åŒ…å…¬ç¥ å°ç« æ”¶é›†"
                              class="journal-image" loading="lazy" onerror="this.src='https://placehold.co/400x300/f0e6d6/7a5c50?text=å›¾ç‰‡åŠ è½½å¤±è´¥'">
                         <div class="journal-desc">
                             <div class="journal-section"><h4>ğŸ­ æ¼”å‡ºæ”»ç•¥</h4><ul><li><strong>ã€Šå²³é£æªæŒ‘å°æ¢ç‹ã€‹ï¼š</strong>11:00/15:00ä¸¤åœºï¼Œæå‰30åˆ†é’Ÿå åº§</li><li><strong>ã€Šå¤§å®‹Â·ä¸œäº¬ä¿å«æˆ˜ã€‹ï¼š</strong>ç‰¹æ•ˆæœ€ä½³åŒºåŸŸï¼šæ°´é¢ä¸œä¾§çœ‹å°</li><li><strong>éšè—è¡¨æ¼”ï¼š</strong>9:00å¼€å›­æ—¶çš„"åŒ…å…¬è¿å®¾"ä»ªå¼</li></ul></div>
                             <div class="journal-section"><h4>ğŸ¯ æ™¯ç‚¹ç§˜ç±</h4><ul><li><strong>æ¸…æ˜ä¸Šæ²³å›¾ï¼š</strong>è™¹æ¡¥è¥¿åŒ—è§’æœ‰å¼ æ‹©ç«¯é›•åƒæ‰“å¡ç‚¹</li><li><strong>å¼€å°åºœï¼š</strong>14:00çš„"åŒ…å…¬æ–­æ¡ˆ"è¡¨æ¼”æœ€ç²¾å½©</li><li><strong>æ·å¾„ï¼š</strong>ä»ç¿°å›­ç¢‘æ—å—é—¨å‡ºå¯é¿å¼€äººæµ</li></ul></div>
                             <div class="journal-section"><h4>ğŸœ å‘³è§‰åœ°å›¾</h4><ul><li><strong>ç¬¬ä¸€æ¥¼çŒæ±¤åŒ…ï¼š</strong>å…ˆå¼€çª—(å’¬å°å£)ã€å†å–æ±¤ã€ååƒçš®</li><li><strong>è¥¿å¸å¤œå¸‚ï¼š</strong>æ¨èæ‘Šä½ï¼šå¼ ä¸‰ç‚’å‡‰ç²‰(Â¥10)ã€å‘¨è®°æä»èŒ¶</li><li><strong>å¿…å°ç‰¹äº§ï¼š</strong>èŠ±ç”Ÿç³•ç°åšç°å–ï¼Œå¯ºé—¨è¡—æœ€æ­£å®—</li></ul></div>
                             <div class="journal-section tips"><h4>ğŸš¶ åŠ¨çº¿ä¼˜åŒ–</h4><p>ã€Œå¼€å°åºœâ†’å¤§ç›¸å›½å¯ºå¯ä¹˜åäººåŠ›ä¸‰è½®è½¦(Â¥15)ï¼Œä½“éªŒè€åŸé£æƒ…ã€</p><p>ã€Œæ¸…æ˜ä¸Šæ²³å›­å¤œæ¸¸ç¥¨(Â¥80)17:30å…¥åœºï¼Œæ€§ä»·æ¯”é«˜äºå…¨æ—¥ç¥¨ã€</p></div>
                         </div>
                     </div>
                 </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="info-section md:col-span-2">
                        <h3 class="font-semibold flex items-center"><i class="fa-regular fa-clock w-5 mr-2 text-amber-600"></i>è¡Œç¨‹å®‰æ’</h3>
                        <ul class="list-disc list-inside ml-1 space-y-1 text-sm">
                             <li><strong>ä¸Šåˆ:</strong> é…’åº—æ—©é¤ -> ä¸­å›½ç¿°å›­ç¢‘æ— (9:20-11:00) -> æ‰“è½¦è‡³åŒ…å…¬ç¥  (11:20-12:40) -> æ‰“è½¦è‡³å¼€å°åºœ</li>
                             <li><strong>ä¸­åˆ:</strong> åˆé¤ (13:00-13:30, åœ°ç‚¹å¾…å®š)</li>
                             <li><strong>ä¸‹åˆ:</strong> å‚è§‚å¼€å°åºœ (13:30-14:45) -> æ‰“è½¦è‡³å¤§ç›¸å›½å¯º (15:05-15:50)</li>
                             <li><strong>å‚æ™š:</strong> æ‰“è½¦å›é…’åº—å–è¡Œæ -> æ‰“è½¦è‡³å¼€å°åŒ—ç«™ -> é«˜é“ å¼€å°åŒ— -> éƒ‘å·ä¸œ (17:07-17:28) -> (å¯é€‰)æ‰“å¡èœœé›ªå†°åŸå¤§æ¥¼ -> é«˜é“ éƒ‘å·ä¸œ -> æ´›é˜³é¾™é—¨ (18:36-19:13)</li>
                             <li><strong>æ™šä¸Š:</strong> æ­¥è¡Œè‡³è‰¾å°šç²¾å“é…’åº— -> æ™šé¤ (æ´›é˜³è€åŸåŒºæˆ–å¤–å–)</li>
                             <li><i class="fa-solid fa-suitcase w-4 mr-1 text-gray-500"></i> è¡Œæå¯„å­˜: æ±‰åº­é…’åº—</li>
                        </ul>
                    </div>
                     <div class="info-section">
                        <h3 class="font-semibold flex items-center"><i class="fa-solid fa-cloud-showers-heavy w-5 mr-2 text-amber-600"></i>å¤©æ°”ä¸ç©¿è¡£</h3>
                        <ul class="list-disc list-inside ml-1 space-y-1 text-sm">
                            <li><strong>å¤©æ°”:</strong> å¤šäº‘è½¬å°é›¨, 17Â°C-25Â°C <em class="text-xs">(è¡Œå‰æŸ¥è¯¢)</em></li>
                            <li><strong>ç©¿è¡£:</strong> Tæ¤/è–„é•¿è¢–+è½»è–„å¤–å¥—, èˆ’é€‚é‹, å¸¦é›¨å…·</li>
                        </ul>
                    </div>
                    <div class="info-section">
                        <h3 class="font-semibold flex items-center"><i class="fa-solid fa-route w-5 mr-2 text-amber-600"></i>æ™¯ç‚¹é—´äº¤é€š</h3>
                         <ul class="ml-1 space-y-1 text-sm">
                            <li><i class="fa-solid fa-person-walking w-4 mr-1 text-gray-500"></i> é…’åº— -> ç¿°å›­ç¢‘æ— (20åˆ†é’Ÿ)</li>
                            <li><i class="fa-solid fa-taxi w-4 mr-1 text-gray-500"></i> ç¿°å›­ç¢‘æ— -> åŒ…å…¬ç¥  (20åˆ†é’Ÿ)</li>
                            <li><i class="fa-solid fa-taxi w-4 mr-1 text-gray-500"></i> åŒ…å…¬ç¥  -> å¼€å°åºœ (20åˆ†é’Ÿ)</li>
                            <li><i class="fa-solid fa-taxi w-4 mr-1 text-gray-500"></i> å¼€å°åºœ -> å¤§ç›¸å›½å¯º (20åˆ†é’Ÿ)</li>
                            <li><i class="fa-solid fa-taxi w-4 mr-1 text-gray-500"></i> å¤§ç›¸å›½å¯º -> é…’åº— (30åˆ†é’Ÿ)</li>
                        </ul>
                    </div>
                    <div class="info-section">
                        <h3 class="font-semibold flex items-center"><i class="fa-solid fa-utensils w-5 mr-2 text-amber-600"></i>é¤é¥®å®‰æ’</h3>
                         <ul class="list-disc list-inside ml-1 space-y-1 text-sm">
                            <li>æ—©é¤: é…’åº—</li>
                            <li>åˆé¤: å¼€å°åºœé™„è¿‘ (æ¨è: ç¬¬ä¸€æ¥¼çŒæ±¤åŒ…)</li>
                            <li>æ™šé¤: æ´›é˜³è€åŸåŒºæˆ–å¤–å–</li>
                        </ul>
                    </div>
                     <div class="info-section">
                        <h3 class="font-semibold flex items-center"><i class="fa-solid fa-bed w-5 mr-2 text-amber-600"></i>ä½å®¿</h3>
                         <ul class="list-disc list-inside ml-1 space-y-1 text-sm">
                            <li>è‰¾å°šç²¾å“é…’åº—ï¼ˆæ´›é˜³é¾™é—¨ç«™ï¼‰</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="day-card p-5 rounded-lg">
                <h2 class="text-xl font-bold mb-4 pb-2">ç¬¬3å¤©ï¼š5æœˆ2æ—¥ (æ˜ŸæœŸäº”) - æ´›é˜³ & è¿”å›æˆéƒ½</h2>

                 <div class="travel-journal my-4">
                    <div class="journal-header">
                        <h3>ğŸ“” æ´›é˜³æ‰‹å¸</h3>
                        <span class="journal-date">5/2</span>
                    </div>
                    <div class="journal-grid">
                        <img src="./day3_journal.png" alt="æ´›é˜³æ‰‹å¸ï¼šé¾™é—¨çŸ³çªŸæ¸¸è§ˆè·¯çº¿ã€ç™½é©¬å¯ºå¼‚å›½ä½›æ®¿å›¾è§£"
                             class="journal-image" loading="lazy" onerror="this.src='https://placehold.co/400x300/f0e6d6/7a5c50?text=å›¾ç‰‡åŠ è½½å¤±è´¥'">
                         <div class="journal-desc">
                            <div class="journal-section"><h4>ğŸ—¿ çŸ³çªŸæŒ‡å—</h4><ul><li><strong>æœ€ä½³è·¯çº¿ï¼š</strong>è¥¿å±±çŸ³çªŸâ†’æ¼«æ°´æ¡¥â†’ä¸œå±±çŸ³çªŸâ†’é¦™å±±å¯º</li><li><strong>å¿…çœ‹æ´çªŸï¼š</strong>å®¾é˜³ä¸‰æ´(çš‡å®¤é€ åƒ)ã€ä¸‡ä½›æ´(15000å°Šå°ä½›)</li><li><strong>æ‘„å½±æ—¶æ®µï¼š</strong>9:00å‰é˜³å…‰ç›´å°„è¥¿å±±ä½›åƒé¢éƒ¨</li></ul></div>
                            <div class="journal-section"><h4>â›© ç™½é©¬å¯ºè¦ç‚¹</h4><ul><li><strong>å››å›½é£æ ¼ï¼š</strong>å°åº¦æ®¿â†’æ³°å›½æ®¿â†’ç¼…ç”¸æ®¿â†’ä¸­å›½åŒº</li><li><strong>éšè—æ™¯ç‚¹ï¼š</strong>ç‹„ä»æ°å¢“åœ¨å¯ºé™¢ä¸œå—è§’</li><li><strong>æ³¨æ„äº‹é¡¹ï¼š</strong>å¤§é›„æ®¿å†…ç¦æ­¢æ‹æ‘„</li></ul></div>
                            <div class="journal-section"><h4>ğŸ¥˜ æ°´å¸­ç¬”è®°</h4><ul><li><strong>ç®¡è®°æ°´å¸­ï¼š</strong>è¿æ±¤è‚‰ç‰‡(å¾®é…¸)ã€ç‰¡ä¸¹ç‡•èœ(èåœä¸æƒŠè‰³)</li><li><strong>å•äººå¥—é¤ï¼š</strong>å»ºè®®é€‰8é“å¼(Â¥68)è¶³å¤Ÿ2äººåˆ†äº«</li><li><strong>æ­é…æ¨èï¼š</strong>é…æµ·ç¢§æ±½æ°´(æœ¬åœ°ç‰¹è‰²)</li></ul></div>
                            <div class="journal-section tips"><h4>â³ æ—¶é—´ç®¡ç†</h4><p>ã€Œé¾™é—¨çŸ³çªŸç”µç“¶è½¦å•ç¨‹Â¥10ï¼Œå»ºè®®è¥¿å±±æ­¥è¡Œâ†’ä¸œå±±ä¹˜è½¦è¿”å›ã€</p><p>ã€Œç™½é©¬å¯ºåˆ°é¾™é—¨ç«™é¢„ç•™1å°æ—¶è½¦ç¨‹ï¼Œ15:00å¿…é¡»å‡ºå‘ã€</p></div>
                        </div>
                    </div>
                 </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="info-section md:col-span-2">
                        <h3 class="font-semibold flex items-center"><i class="fa-regular fa-clock w-5 mr-2 text-amber-600"></i>è¡Œç¨‹å®‰æ’</h3>
                        <ul class="list-disc list-inside ml-1 space-y-1 text-sm">
                            <li><strong>ä¸Šåˆ:</strong> æ—©é¤ (6:50-7:10) -> æ‰“è½¦è‡³é¾™é—¨çŸ³çªŸ (7:30å¼€å›­) -> å‚è§‚é¾™é—¨çŸ³çªŸ (7:30-11:00) <strong class="text-red-500">(æå‰è´­ç¥¨)</strong></li>
                            <li><strong>ä¸­åˆ:</strong> æ‰“è½¦è‡³åº”å¤©é—¨é™„è¿‘ -> åˆé¤ (11:30-12:30, æ°´å¸­/æ´›é¦æ‘)</li>
                            <li><strong>ä¸‹åˆ:</strong> æ‰“è½¦è‡³ç™½é©¬å¯º (13:30-15:00) -> æ‰“è½¦å›é…’åº—å–è¡Œæ (15:00-15:55) -> æ­¥è¡Œè‡³æ´›é˜³é¾™é—¨ç«™</li>
                            <li><strong>å‚æ™š:</strong> é«˜é“ æ´›é˜³é¾™é—¨ -> æˆéƒ½ä¸œ (16:29-21:55)</li>
                            <li><i class="fa-solid fa-suitcase w-4 mr-1 text-gray-500"></i> è¡Œæå¯„å­˜: è‰¾å°šé…’åº—</li>
                            <li><i class="fa-solid fa-map-signs w-4 mr-1 text-gray-500"></i> é¾™é—¨çŸ³çªŸè·¯çº¿: è¥¿å±±(åŒ—->å—) -> æ¼«æ°´æ¡¥ -> ç¤¼ä½›å° -> ç”µç“¶è½¦å›è¥¿åŒ—æœåŠ¡åŒº</li>
                        </ul>
                    </div>
                     <div class="info-section">
                        <h3 class="font-semibold flex items-center"><i class="fa-solid fa-cloud-rain w-5 mr-2 text-amber-600"></i>å¤©æ°”ä¸ç©¿è¡£</h3>
                        <ul class="list-disc list-inside ml-1 space-y-1 text-sm">
                            <li><strong>å¤©æ°”:</strong> å°é›¨è½¬æ™´, 15Â°C-26Â°C <em class="text-xs">(è¡Œå‰æŸ¥è¯¢)</em></li>
                            <li><strong>ç©¿è¡£:</strong> é€æ°”Tæ¤+è½»ä¾¿å¤–å¥—, é˜²æ»‘é‹, å¤‡é›¨å…·/é˜²æ™’</li>
                        </ul>
                    </div>
                    <div class="info-section">
                        <h3 class="font-semibold flex items-center"><i class="fa-solid fa-route w-5 mr-2 text-amber-600"></i>æ™¯ç‚¹é—´äº¤é€š</h3>
                         <ul class="ml-1 space-y-1 text-sm">
                            <li><i class="fa-solid fa-taxi w-4 mr-1 text-gray-500"></i> é…’åº— -> é¾™é—¨çŸ³çªŸ (20åˆ†é’Ÿ)</li>
                            <li><i class="fa-solid fa-taxi w-4 mr-1 text-gray-500"></i> é¾™é—¨çŸ³çªŸ -> åº”å¤©é—¨ (20-30åˆ†é’Ÿ)</li>
                            <li><i class="fa-solid fa-taxi w-4 mr-1 text-gray-500"></i> åº”å¤©é—¨ -> ç™½é©¬å¯º (40åˆ†é’Ÿ)</li>
                            <li><i class="fa-solid fa-taxi w-4 mr-1 text-gray-500"></i> ç™½é©¬å¯º -> æ´›é˜³é¾™é—¨ç«™ (45åˆ†é’Ÿ, <strong class="text-red-500">15:00å‰å‡ºå‘</strong>)</li>
                         </ul>
                    </div>
                    <div class="info-section">
                        <h3 class="font-semibold flex items-center"><i class="fa-solid fa-utensils w-5 mr-2 text-amber-600"></i>é¤é¥®å®‰æ’</h3>
                         <ul class="list-disc list-inside ml-1 space-y-1 text-sm">
                            <li>æ—©é¤: é…’åº—é™„è¿‘ (å¦‚: æ´›é˜³æ±¤é¦†)</li>
                            <li>åˆé¤: å¸‚åŒº (æ°´å¸­/æµ†é¢æ¡/ç³Šæ¶‚é¢)</li>
                            <li>æ™šé¤: é«˜é“ä¸Šç‚¹é¤</li>
                        </ul>
                    </div>
                     <div class="info-section">
                        <h3 class="font-semibold flex items-center"><i class="fa-solid fa-train-subway w-5 mr-2 text-amber-600"></i>è¿”ç¨‹äº¤é€š</h3>
                         <ul class="list-disc list-inside ml-1 space-y-1 text-sm">
                            <li>é«˜é“: æ´›é˜³é¾™é—¨ -> æˆéƒ½ä¸œ (16:29-21:55)</li>
                        </ul>
                    </div>
                </div>
            </div>

        </div> <hr class="my-8 border-t border-gray-300">

        <div class="important-note-section">
            <h2 class="text-2xl font-semibold mb-4 pb-2">æ•´ä½“å…³é”®æ³¨æ„äº‹é¡¹</h2>
            <div class="space-y-4 text-sm">
                <div>
                    <h3 class="font-semibold text-lg mb-2 text-amber-700">1. æ—¶é—´ç®¡ç†ï¼š</h3>
                    <ul class="list-disc list-inside ml-4 space-y-1">
                        <li>æ¯å¤©è¡Œç¨‹é¢„ç•™30%å¼¹æ€§æ—¶é—´ã€‚</li>
                        <li>éƒ‘å·ä¸œ/æ´›é˜³é¾™é—¨ç«™æå‰1å°æ—¶åˆ°ï¼Œç”¨"é“è·¯12306"çœ‹æ£€ç¥¨å£ã€‚</li>
                    </ul>
                </div>
                <div>
                    <h3 class="font-semibold text-lg mb-2 text-amber-700">2. æ™¯åŒºæ³¨æ„ï¼š</h3>
                    <ul class="list-disc list-inside ml-4 space-y-1">
                        <li>æ²³å—åšç‰©é™¢é¿å¼€10-11ç‚¹é«˜å³°ï¼Œé‡ç‚¹çœ‹äºŒæ¥¼ï¼Œé¢„çº¦è®²è§£ã€‚</li>
                        <li>é¾™é—¨çŸ³çªŸæ—©å»è¥¿å±±ï¼Œ10ç‚¹åäººå¤šå¯é”™å³°ä¸œå±±ã€‚</li>
                    </ul>
                </div>
                 <div>
                    <h3 class="font-semibold text-lg mb-2 text-amber-700">3. å·¥å…·å‡†å¤‡ï¼š</h3>
                    <ul class="list-disc list-inside ml-4 space-y-1">
                        <li>APP: "éƒ‘å·åœ°é“", "æ´›æ˜“è¡Œ"</li>
                        <li>ç‰©å“: å……ç”µå®(2W mAh), é˜²æ™’å¸½, æŠ˜å ä¼, è‚ èƒƒè¯, é©±èšŠæ¶², ä¾¿æºé£æ‰‡, æ¹¿å·¾</li>
                    </ul>
                </div>
            </div>

            <h3 class="font-semibold text-lg mt-6 mb-3 text-amber-700">æå‰é¢„çº¦</h3>
            <div class="overflow-x-auto">
                <table class="min-w-full text-sm">
                    <thead>
                        <tr><th>æ™¯ç‚¹åç§°</th><th>é¢„çº¦æ–¹å¼</th><th>æ³¨æ„äº‹é¡¹</th></tr>
                    </thead>
                    <tbody>
                        <tr><td>æ²³å—åšç‰©é™¢</td><td>å…¬ä¼—å·"æ²³å—åšç‰©é™¢"æå‰5å¤©</td><td>60å¤©å†…å–æ¶ˆ3æ¬¡é™åˆ¶, ä¸»å±•é¦†äºŒæ¥¼å¿…çœ‹</td></tr>
                        <tr><td>æ¸…æ˜ä¸Šæ²³å›­</td><td>å…¬ä¼—å·"æ¸…æ˜ä¸Šæ²³å›­"è´­ç¥¨</td><td>æå‰3å¤©çœ‹æ¼”å‡ºè¡¨, ä¸¤å¤§æ¼”å‡ºå¿…çœ‹</td></tr>
                        <tr><td>é¾™é—¨çŸ³çªŸ</td><td>å…¬ä¼—å·"é¾™é—¨çŸ³çªŸ"è´­ç¥¨</td><td>7:30ç›´å¥”è¥¿å±±, 10ç‚¹åäººå¤š</td></tr>
                        <tr><td>ç™½é©¬å¯º</td><td>å…¬ä¼—å·"æ´›é˜³ç™½é©¬å¯º"é¢„çº¦</td><td>å°åº¦æ®¿æ‹å‰ªå½±, 14:00åé¿å¼€å›¢</td></tr>
                    </tbody>
                </table>
            </div>

            <h3 class="font-semibold text-lg mt-6 mb-3 text-amber-700">ç¾é£Ÿåœ°å›¾</h3>
             <div class="overflow-x-auto">
                <table class="min-w-full text-sm">
                    <thead>
                        <tr><th>åŸå¸‚</th><th>æ¨èé¤å…</th><th>æ‹›ç‰Œèœ</th><th>é”™å³°æ—¶æ®µ</th></tr>
                    </thead>
                    <tbody>
                        <tr><td>éƒ‘å·</td><td>æ–¹ä¸­å±±èƒ¡è¾£æ±¤(ç´«è†å±±è·¯åº—)</td><td>èƒ¡è¾£æ±¤+æ²¹é¦å¤´</td><td>7:00å‰</td></tr>
                        <tr><td>å¼€å°</td><td>ç¬¬ä¸€æ¥¼çŒæ±¤åŒ…(è¥¿å¸å¤œå¸‚åº—)</td><td>çŒæ±¤åŒ…+é²¤é±¼ç„™é¢</td><td>11:30å‰</td></tr>
                        <tr><td>æ´›é˜³</td><td>ç®¡è®°æ°´å¸­è€åº—(è€åŸåŒº)</td><td>è¿æ±¤è‚‰ç‰‡+ç‰¡ä¸¹ç‡•èœ</td><td>17:30å‰</td></tr>
                    </tbody>
                </table>
            </div>

            <p class="mt-6 text-center text-amber-700 font-semibold">ç¥æ‚¨æ²³å—ä¹‹è¡Œæ„‰å¿«é¡ºåˆ©ï¼</p>
        </div>

    </div> <div id="lightbox">
        <div class="lightbox-content">
            <span class="close">&times;</span>
            <img id="lightbox-img" src="" alt="æ”¾å¤§å›¾ç‰‡">
            <p id="lightbox-caption"></p>
        </div>
    </div>

    <script type="text/javascript">
        // --- Map Initialization ---
        var map = new AMap.Map('mapContainer', {
            resizeEnable: true,
            zoom: 7, // Adjusted zoom for wider overview initially
            center: [113.5, 34.7] // Center between Zhengzhou, Kaifeng, Luoyang
        });

        // --- Data Definitions ---
        // åœ°ç‚¹æ•°æ®ï¼ŒåŒ…å«åæ ‡å’Œå‚è§‚æ—¶é—´ (Keep existing data)
        const day1Locations = [
            { name: "æ²³å—åšç‰©é™¢", city: "éƒ‘å·", title: "Day 1: æ²³å—åšç‰©é™¢", position: [113.681, 34.791], stayTime: "3.5å°æ—¶" },
            { name: "äºŒä¸ƒå¹¿åœº", city: "éƒ‘å·", title: "Day 1: äºŒä¸ƒå¹¿åœº", position: [113.665, 34.754], stayTime: "1.5å°æ—¶" },
            { name: "åƒçºå¹¿åœº", city: "éƒ‘å·", title: "Day 1: å¤§ç‰ç±³æ¥¼", position: [113.678, 34.748], stayTime: "1.5å°æ—¶" },
            { name: "éƒ‘å·ä¸œç«™", city: "éƒ‘å·", title: "Day 1: éƒ‘å·ä¸œç«™", position: [113.715, 34.749], stayTime: "0.5å°æ—¶" },
            { name: "å®‹åŸè·¯ç«™", city: "å¼€å°", title: "Day 1: å®‹åŸè·¯ç«™", position: [114.346, 34.858], stayTime: "0.5å°æ—¶" }, // Corrected station name
            { name: "æ¸…æ˜ä¸Šæ²³å›­", city: "å¼€å°", title: "Day 1: æ¸…æ˜ä¸Šæ²³å›­", position: [114.329, 34.807], stayTime: "æ™šä¸Š" } // Added Qingming Garden for Day 1 evening
        ];
        const day2Locations = [
            { name: "ä¸­å›½ç¿°å›­ç¢‘æ—", city: "å¼€å°", title: "Day 2: ç¿°å›­ç¢‘æ—", position: [114.326, 34.811], stayTime: "1.5å°æ—¶" }, // Added Han Yuan
            { name: "åŒ…å…¬ç¥ ", city: "å¼€å°", title: "Day 2: åŒ…å…¬ç¥ ", position: [114.339, 34.786], stayTime: "1.5å°æ—¶" }, // Added Bao Gong Ci
            { name: "å¼€å°åºœ", city: "å¼€å°", title: "Day 2: å¼€å°åºœ", position: [114.341, 34.791], stayTime: "1.5å°æ—¶" },
            { name: "å¤§ç›¸å›½å¯º", city: "å¼€å°", title: "Day 2: å¤§ç›¸å›½å¯º", position: [114.354, 34.791], stayTime: "1å°æ—¶" },
            { name: "å¼€å°åŒ—ç«™", city: "å¼€å°", title: "Day 2: å¼€å°åŒ—ç«™", position: [114.346, 34.858], stayTime: "0.5å°æ—¶" },
            { name: "éƒ‘å·ä¸œç«™", city: "éƒ‘å·", title: "Day 2: éƒ‘å·ä¸œç«™ (ä¸­è½¬)", position: [113.715, 34.749], stayTime: "0.5å°æ—¶" }, // Added transfer
            { name: "æ´›é˜³é¾™é—¨ç«™", city: "æ´›é˜³", title: "Day 2: æ´›é˜³é¾™é—¨ç«™", position: [112.454, 34.618], stayTime: "0.5å°æ—¶" }
        ];
        const day3Locations = [
            { name: "é¾™é—¨çŸ³çªŸ", city: "æ´›é˜³", title: "Day 3: é¾™é—¨çŸ³çªŸ", position: [112.471, 34.555], stayTime: "3.5å°æ—¶" },
            { name: "åº”å¤©é—¨", city: "æ´›é˜³", title: "Day 3: åº”å¤©é—¨ (åˆé¤)", position: [112.464, 34.672], stayTime: "1å°æ—¶" }, // Added Yingtianmen
            { name: "ç™½é©¬å¯º", city: "æ´›é˜³", title: "Day 3: ç™½é©¬å¯º", position: [112.599, 34.723], stayTime: "1.5å°æ—¶" },
            { name: "æ´›é˜³é¾™é—¨ç«™", city: "æ´›é˜³", title: "Day 3: æ´›é˜³é¾™é—¨ç«™ (è¿”ç¨‹)", position: [112.454, 34.618], stayTime: "0.5å°æ—¶" }
        ];

        // --- Global Storage for Map Elements ---
        let day1MapElements = []; // Stores { marker: AMap.Marker, polyline: AMap.Polyline | null }
        let day2MapElements = [];
        let day3MapElements = [];
        let allMapMarkers = []; // Just markers for fitting view

        // --- Utility for logging ---
        function logToMapDiv(message) {
            console.log(message); // Also log to console
            const logDiv = document.getElementById('mapLog');
            if (logDiv) {
                const time = new Date().toLocaleTimeString();
                // Keep only the last few messages to prevent overflow
                const lines = logDiv.innerHTML.split('<br>');
                const maxLines = 5;
                if (lines.length > maxLines) {
                    logDiv.innerHTML = lines.slice(-maxLines).join('<br>');
                }
                logDiv.innerHTML += `<br>[${time}] ${message}`;
                logDiv.scrollTop = logDiv.scrollHeight; // Scroll to bottom
            }
        }

        // --- Core Map Functions ---
        // Function to create marker (simplified, assumes position exists)
        function createMarker(locationData) {
            const lnglat = locationData.position;
            const marker = new AMap.Marker({
                position: lnglat,
                title: `${locationData.name} (${locationData.title})`,
                // map: map // Don't add to map immediately
            });
            marker.on('click', function() {
                const infoWindow = new AMap.InfoWindow({
                    content: `<div class="p-2"><h3 class="text-base font-semibold text-amber-800">${locationData.name}</h3><p class="text-sm text-gray-600">${locationData.title}</p><p class="text-sm text-gray-600">å»ºè®®åœç•™: ${locationData.stayTime}</p></div>`,
                    offset: new AMap.Pixel(0, -30) // Adjust offset
                });
                infoWindow.open(map, marker.getPosition());
            });
            logToMapDiv(`Marker object created for ${locationData.name}`);
            return { lnglat: lnglat, marker: marker };
        }

        // Function to draw a polyline for a day's route
        function createPolyline(pathData, color) {
            const validPoints = pathData.map(p => p.lnglat); // Assumes all data has lnglat
            if (validPoints.length >= 2) {
                const polyline = new AMap.Polyline({
                    path: validPoints,
                    borderWeight: 2,
                    strokeColor: color || '#d4a373', // Warm default color
                    strokeOpacity: 0.9,
                    strokeWeight: 5,
                    strokeStyle: "solid",
                    lineJoin: 'round',
                    lineCap: 'round',
                    showDir: true // æ˜¾ç¤ºæ–¹å‘ç®­å¤´
                });
                logToMapDiv(`Polyline object created with ${validPoints.length} points.`);
                return polyline; // Return the polyline object
            } else {
                 logToMapDiv(`Not enough points (${validPoints.length}) to create polyline.`);
                 return null; // Not enough points
            }
        }

        // Process locations for a single day
        function processDayRoute(locations, color) {
            const mapElements = [];
            const processedData = locations.map(loc => createMarker(loc));

            // Add markers to the list
            processedData.forEach(d => mapElements.push(d.marker));
            allMapMarkers.push(...processedData.map(d => d.marker)); // Add to global marker list

            // Create polyline
            const polyline = createPolyline(processedData, color);
            if (polyline) {
                mapElements.push(polyline);
            }
            return mapElements; // Return markers and polyline
        }

        // --- Visibility Control Functions ---
        function hideElements(elementsArray) {
            if (!elementsArray || elementsArray.length === 0) return;
            logToMapDiv(`Removing ${elementsArray.length} elements from map.`);
            try {
                map.remove(elementsArray); // Remove from map
            } catch (e) {
                logToMapDiv(`Error removing elements: ${e}`);
                console.error("Error removing elements:", e, elementsArray);
            }
        }

        function showElements(elementsArray) {
             if (!elementsArray || elementsArray.length === 0) return;
            logToMapDiv(`Adding ${elementsArray.length} elements to map.`);
             try {
                map.add(elementsArray); // Add elements to map
            } catch (e) {
                logToMapDiv(`Error adding elements: ${e}`);
                console.error("Error adding elements:", e, elementsArray);
            }
        }

        function displayRoute(dayNumber) {
            logToMapDiv(`Displaying route for Day ${dayNumber}`);
            // Remove all elements first for a clean slate
            map.remove(day1MapElements);
            map.remove(day2MapElements);
            map.remove(day3MapElements);

            let elementsToShow = [];
            let markersToShow = [];

            if (dayNumber === 1) elementsToShow = day1MapElements;
            else if (dayNumber === 2) elementsToShow = day2MapElements;
            else if (dayNumber === 3) elementsToShow = day3MapElements;

            showElements(elementsToShow);
            markersToShow = elementsToShow.filter(el => el.CLASS_NAME === 'AMap.Marker');

            if (markersToShow.length > 0) {
                map.setFitView(markersToShow, false, [80, 80, 80, 80], 14); // More padding, allow closer zoom
                 logToMapDiv(`Adjusted view for Day ${dayNumber}.`);
            } else {
                logToMapDiv(`No markers to fit view for Day ${dayNumber}.`);
            }
        }

        function displayAllRoutes() {
            logToMapDiv("Displaying all routes");
            // Remove all elements first
            map.remove(day1MapElements);
            map.remove(day2MapElements);
            map.remove(day3MapElements);

            // Show all elements
            showElements(day1MapElements);
            showElements(day2MapElements);
            showElements(day3MapElements);

            if (allMapMarkers.length > 0) {
                map.setFitView(allMapMarkers, false, [60, 60, 60, 60], 12); // Fit all markers
                logToMapDiv("Adjusted view for all markers.");
            } else {
                 logToMapDiv("No markers to fit view for all routes.");
            }
        }

        // --- Event Listeners ---
        function addEventListeners() {
            document.getElementById('showAllBtn').addEventListener('click', displayAllRoutes);
            document.getElementById('showDay1Btn').addEventListener('click', () => displayRoute(1));
            document.getElementById('showDay2Btn').addEventListener('click', () => displayRoute(2));
            document.getElementById('showDay3Btn').addEventListener('click', () => displayRoute(3));
            logToMapDiv("Button listeners added.");
        }

        // --- Lightbox Functionality ---
        document.addEventListener('DOMContentLoaded', function() {
            const lightbox = document.getElementById('lightbox');
            const lightboxImg = document.getElementById('lightbox-img');
            const lightboxCaption = document.getElementById('lightbox-caption');
            const closeBtn = lightbox.querySelector('.close');

            document.querySelectorAll('.journal-image').forEach(image => {
                image.addEventListener('click', function() {
                    const src = this.getAttribute('src');
                    const alt = this.getAttribute('alt') || 'æ‰‹å¸å›¾ç‰‡';
                    if (src && !src.includes('placehold.co')) { // Don't open placeholder
                        lightboxImg.src = src;
                        lightboxCaption.textContent = alt;
                        lightbox.style.display = 'flex';
                        document.body.style.overflow = 'hidden';
                    } else if (src && src.includes('placehold.co')) {
                        // Optional: Show a message that the image is a placeholder
                        console.log("Placeholder image clicked.");
                    }
                });
            });

            function closeLightbox() {
                lightbox.style.display = 'none';
                lightboxImg.src = ''; // Clear image source
                lightboxCaption.textContent = '';
                document.body.style.overflow = 'auto';
            }

            closeBtn.addEventListener('click', closeLightbox);
            lightbox.addEventListener('click', function(e) {
                if (e.target === lightbox) { // Click on background only
                    closeLightbox();
                }
            });
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && lightbox.style.display === 'flex') {
                    closeLightbox();
                }
            });
            logToMapDiv("Lightbox listeners added.");
        });


        // --- Main Execution ---
        function initializeMapFeatures() {
            try {
                logToMapDiv("Processing Day 1 route...");
                day1MapElements = processDayRoute(day1Locations, '#f97316'); // Orange

                logToMapDiv("Processing Day 2 route...");
                day2MapElements = processDayRoute(day2Locations, '#84cc16'); // Lime

                logToMapDiv("Processing Day 3 route...");
                day3MapElements = processDayRoute(day3Locations, '#0ea5e9'); // Sky Blue

                logToMapDiv("All route data processed.");
                addEventListeners(); // Setup buttons
                displayAllRoutes(); // Show all routes initially

            } catch (error) {
                console.error("Error initializing map features:", error);
                logToMapDiv(`FATAL ERROR initializing map features: ${error}`);
            }
        }

        // Start processing locations once the map API is ready
        map.on('complete', function() {
             logToMapDiv("Map API loaded completely.");
             // Simplified check, assumes Geocoder loads if map loads
             logToMapDiv("Starting feature initialization...");
             initializeMapFeatures();
        });

    </script>
</body>
</html>
